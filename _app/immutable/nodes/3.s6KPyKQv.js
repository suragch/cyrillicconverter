import{f as x,a as v,c as at}from"../chunks/Y1qfGezR.js";import{i as lt}from"../chunks/DN6SW8RB.js";import{p as st,aB as bt,Y as ct,c as t,m as P,af as q,f as l,i,r as a,k as A,b as s,e as dt,aC as ft}from"../chunks/BuRW4a-I.js";import{s as y,e as h}from"../chunks/FIFTuy36.js";import{i as W}from"../chunks/DWZ7psrM.js";import{e as rt,i as nt}from"../chunks/D-D9Z2yP.js";import{r as gt,b as vt,s as mt}from"../chunks/BRsubLRt.js";import{d as K}from"../chunks/CzYrKbrN.js";import{p as it,b as yt}from"../chunks/D-k3Rz23.js";const J=new Map,N=new Map;async function ht(){console.log("Initializing conversion engine..."),await K.abbreviations.toArray(),await K.expansions.toArray(),J.set("АН",[{expansion:"Ардчилсан Нам"},{expansion:"Америкийн Нэгдсэн Улс"}]),N.set("Монгол",[{traditional:"ᠮᠣᠩᠭᠣᠯ"}]),N.set("хүн",[{traditional:"ᠬᠦᠮᠦᠨ"}]),console.log("Engine initialized.")}function xt(T){const c=[],u=T.split(/(\s+)/);for(const n of u){if(n.match(/^\s+$/)){c.push({type:"whitespace",value:n});continue}if(n!=="")if(J.has(n)&&J.get(n).length>1)c.push({type:"ambiguous_abbreviation",original:n,options:J.get(n).map(r=>r.expansion)});else if(N.has(n)){const r=N.get(n)[0];c.push({type:"converted",original:n,converted:r.traditional})}else c.push({type:"unconverted",original:n})}return c}var _t=x('<div class="overlay svelte-1ldwunz"></div> <div class="modal-box svelte-1ldwunz" role="dialog" aria-modal="true"><h2 class="display-title svelte-1ldwunz"> </h2> <div class="context-snippet svelte-1ldwunz"><p><strong>Context:</strong> </p></div> <div class="form-group"><label for="menksoft-input">Traditional Mongolian (Menksoft)</label> <input type="text" id="menksoft-input" placeholder="Enter Menksoft translation..."/></div> <div class="live-preview"><p> </p></div> <div class="actions svelte-1ldwunz"><button class="secondary">Save Locally</button> <button class="primary">Save & Submit</button></div></div>',1);function wt(T,c){st(c,!1);let u=it(c,"cyrillicWord",8),n=it(c,"context",8),r=P(""),d=P();const j=bt();async function B(){if(!t(r).trim()){alert("Please enter the traditional Mongolian conversion.");return}try{const o={cyrillic_word:u(),menksoft:t(r),context:n()};await K.syncQueue.add({payload:o,timestamp:Date.now()}),await(await navigator.serviceWorker.ready).sync.register("sync-contributions"),alert("Contribution saved and will be submitted to the community!"),j("close")}catch(o){console.error("Failed to queue contribution for sync:",o),alert("Could not save contribution. Please try again later.")}}function Q(){t(r).trim()&&(console.log("Saved locally."),j("save",{menksoft:t(r).trim()}))}function O(){j("close")}ct(()=>{t(d).focus()}),lt();var R=_t(),D=q(R),M=l(D,2),_=i(M),z=i(_);a(_);var S=l(_,2),F=i(S),Y=l(i(F));a(F),a(S);var I=l(S,2),w=l(i(I),2);gt(w),yt(w,o=>s(d,o),()=>t(d)),a(I);var E=l(I,2),L=i(E),U=i(L);a(L),a(E);var G=l(E,2),H=i(G),e=l(H,2);a(G),a(M),A(()=>{y(z,`Add Translation for "${u()??""}"`),y(Y,` "${n()??""}"`),y(U,`Preview: ${t(r)??""}`)}),h("click",D,O),vt(w,()=>t(r),o=>s(r,o)),h("keydown",w,o=>o.key==="Enter"&&B()),h("click",H,Q),h("click",e,B),v(T,R),dt()}var kt=x("<span> </span>"),Ct=x('<button class="unconverted-word svelte-1uha8ag"> </button>'),Mt=x("<span> </span>"),zt=x('<button class="px-4 py-2 border rounded-lg hover:bg-gray-100"> </button>'),St=x('<div class="flex flex-col space-y-2"></div>'),Et=x('<div class="popover-placeholder fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center"><div class="bg-white p-8 rounded-lg shadow-xl"><h3 class="text-xl font-semibold mb-4"> </h3> <!></div></div>'),Wt=x('<div class="grid grid-cols-1 md:grid-cols-2 gap-4 md:gap-8 min-h-[calc(100vh-8rem)]"><div class="flex flex-col space-y-4"><textarea placeholder="Та кирилл монгол бичвэрээ энд буулгана уу..." class="flex-grow p-4 border border-light-gray rounded-lg focus:outline-none focus:border-royal-blue resize-none text-lg leading-relaxed text-near-black bg-white placeholder-medium-gray"></textarea> <div class="flex space-x-4"><button class="px-6 py-3 bg-royal-blue text-white rounded-lg font-medium text-base hover:bg-bright-blue transition-colors duration-200 shadow-md">Convert</button> <button class="px-6 py-3 border border-light-gray text-near-black rounded-lg font-medium text-base hover:bg-off-white transition-colors duration-200 shadow-sm">Copy</button> <button class="px-6 py-3 border border-light-gray text-near-black rounded-lg font-medium text-base hover:bg-off-white transition-colors duration-200 shadow-sm">Clear</button></div></div> <div class="flex flex-col space-y-4"><div class="output-panel flex-grow p-4 border border-light-gray rounded-lg focus:outline-none focus:border-royal-blue resize-none text-lg leading-relaxed text-near-black bg-off-white"></div></div></div> <!> <!>',1);function Bt(T,c){st(c,!1);let u=P(""),n=P([]),r=P(null),d=P(null);function j(e){s(r,{word:e,context:t(u)})}async function B(e){if(!t(r))return;const{menksoft:o}=e.detail,p=t(r).word;try{await K.userContributions.add({cyrillic_word:p,traditional:o}),s(r,null),Q()}catch(k){console.error("Failed to save contribution:",k)}}ct(async()=>{await ht()});function Q(){const e=xt(t(u)),o=e.find(p=>p.type.startsWith("ambiguous"));o?s(d,o):(s(d,null),s(n,e))}const O=e=>{navigator.clipboard.writeText(e).then(()=>{console.log("Copied:",e)}).catch(o=>{console.error("Could not copy text: ",o)})},R=()=>{s(u,""),s(n,[]),s(d,null),console.log("Cleared inputs")};lt();var D=Wt(),M=q(D),_=i(M),z=i(_);ft(z),mt(z,"rows",10);var S=l(z,2),F=i(S),Y=l(F,2),I=l(Y,2);a(S),a(_);var w=l(_,2),E=i(w);rt(E,5,()=>t(n),nt,(e,o)=>{var p=at(),k=q(p);{var V=m=>{var b=kt(),C=i(b,!0);a(b),A(()=>y(C,t(o).converted)),v(m,b)},X=m=>{var b=at(),C=q(b);{var Z=f=>{var g=Ct(),tt=i(g,!0);a(g),A(()=>y(tt,t(o).original)),h("click",g,()=>j(t(o).original)),v(f,g)},$=f=>{var g=at(),tt=q(g);{var ut=et=>{var ot=Mt(),pt=i(ot,!0);a(ot),A(()=>y(pt,t(o).value)),v(et,ot)};W(tt,et=>{t(o).type==="whitespace"&&et(ut)},!0)}v(f,g)};W(C,f=>{t(o).type==="unconverted"?f(Z):f($,!1)},!0)}v(m,b)};W(k,m=>{t(o).type==="converted"?m(V):m(X,!1)})}v(e,p)}),a(E),a(w),a(M);var L=l(M,2);{var U=e=>{wt(e,{get cyrillicWord(){return t(r).word},get context(){return t(r).context},$$events:{close:()=>s(r,null),save:B}})};W(L,e=>{t(r)&&e(U)})}var G=l(L,2);{var H=e=>{var o=Et(),p=i(o),k=i(p),V=i(k);a(k);var X=l(k,2);{var m=b=>{var C=St();rt(C,5,()=>t(d).options,nt,(Z,$)=>{var f=zt(),g=i(f,!0);a(f),A(()=>y(g,t($))),v(Z,f)}),a(C),v(b,C)};W(X,b=>{t(d).type==="ambiguous_abbreviation"&&b(m)})}a(p),a(o),A(()=>y(V,`Choose an option for "${t(d).original??""}"`)),v(e,o)};W(G,e=>{t(d)&&e(H)})}vt(z,()=>t(u),e=>s(u,e)),h("click",F,Q),h("click",Y,()=>O(t(n).map(e=>e.type==="converted"?e.converted:e.type==="whitespace"?e.value:e.original).join(""))),h("click",I,R),v(T,D),dt()}export{Bt as component};
